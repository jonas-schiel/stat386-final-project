{
  "hash": "035f265083d8bf6d79e49e30fe87732d",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: 'Demonstration of the Functions:'\n---\n\n\n\n\n::: {#0dad75fc .cell execution_count=1}\n\n::: {.cell-output .cell-output-stderr}\n```\n/var/folders/60/p3sjh3zx3793rb8gcc5_7qn00000gn/T/ipykernel_47477/1578626720.py:203: DtypeWarning: Columns (4,7) have mixed types. Specify dtype option on import or set low_memory=False.\n  df = pd.read_csv('economic_election_data.csv')\n```\n:::\n:::\n\n\nThis function, wrangle_data, allows us to wrangle downloadable csvs about economic data. Here we plug in our unemployment rate dataset and it does all of the wrangling and formatting for us. Here are just the first five rows of what the data will look like afterwards.\n\n::: {#d7fcc419 .cell execution_count=2}\n``` {.python .cell-code}\nUNRATE = wrangle_data(\n    filepath='UNRATE.csv',\n    value_col='UNRATE'\n)\n\nUNRATE.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Month</th>\n      <th>Year</th>\n      <th>UNRATE</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>January</td>\n      <td>1948</td>\n      <td>3.4</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>February</td>\n      <td>1948</td>\n      <td>3.8</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>March</td>\n      <td>1948</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>April</td>\n      <td>1948</td>\n      <td>3.9</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>May</td>\n      <td>1948</td>\n      <td>3.5</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nThe next function, merge_and_sort_data, combines all of the economic data that we gathered into one data set. Here you can see that all three of the data sets are combined together to make one dataset. There are a few missing values but those get taken care of in another function that we have.\n\n::: {#d4257d45 .cell execution_count=3}\n``` {.python .cell-code}\ncombined_data = merge_and_sort_data(UNRATE, GDP, CPI)\ncombined_data.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Month</th>\n      <th>Year</th>\n      <th>UNRATE</th>\n      <th>GDP</th>\n      <th>CPI</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>January</td>\n      <td>1948</td>\n      <td>3.4</td>\n      <td>265.742</td>\n      <td>23.68</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>February</td>\n      <td>1948</td>\n      <td>3.8</td>\n      <td>NaN</td>\n      <td>23.67</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>March</td>\n      <td>1948</td>\n      <td>4.0</td>\n      <td>NaN</td>\n      <td>23.50</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>April</td>\n      <td>1948</td>\n      <td>3.9</td>\n      <td>272.567</td>\n      <td>23.82</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>May</td>\n      <td>1948</td>\n      <td>3.5</td>\n      <td>NaN</td>\n      <td>24.01</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nOur next fuction, get_presidents_html, allows us to scrape the data about presidents of the United States, the years that they were president and the political party that they represented. This allows for easier data combination and cleaning so we will combine that with the last function, add_presidnets_to_data, we combine the data that we have and clean it creating our final president and economic dataset ready to be combined with the election data.\n\n::: {#4b0e0a5b .cell execution_count=4}\n``` {.python .cell-code}\nurl = 'https://en.wikipedia.org/wiki/List_of_presidents_of_the_United_States' \nemail = \"skirk03@byu.edu\" \nua = f\"STAT386-class-scraper/1.0 (+{email})\" \nr = requests.get(url, headers={\"User-Agent\": ua, \"From\": email}, timeout=15)\n\ntext = get_presidents_html(ua = f\"STAT386-class-scraper/1.0 (+{email})\", email = \"skirk03@byu.edu\")\n\nFinal_df = add_presidents_to_data(combined_data, text)\nFinal_df.head(20)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/var/folders/60/p3sjh3zx3793rb8gcc5_7qn00000gn/T/ipykernel_47477/1578626720.py:50: FutureWarning: Passing literal html to 'read_html' is deprecated and will be removed in a future version. To read from a literal string, wrap it in a 'StringIO' object.\n  tables = pd.read_html(html_text)\n/var/folders/60/p3sjh3zx3793rb8gcc5_7qn00000gn/T/ipykernel_47477/1578626720.py:68: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.\n  df[\"Start_Date\"] = pd.to_datetime(\n/var/folders/60/p3sjh3zx3793rb8gcc5_7qn00000gn/T/ipykernel_47477/1578626720.py:71: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.\n  df[\"End_Date\"] = pd.to_datetime(\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Month</th>\n      <th>Year</th>\n      <th>UNRATE</th>\n      <th>GDP</th>\n      <th>CPI</th>\n      <th>President</th>\n      <th>Party</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>January</td>\n      <td>1948</td>\n      <td>3.4</td>\n      <td>265.742000</td>\n      <td>23.68</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>February</td>\n      <td>1948</td>\n      <td>3.8</td>\n      <td>268.017000</td>\n      <td>23.67</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>March</td>\n      <td>1948</td>\n      <td>4.0</td>\n      <td>270.292000</td>\n      <td>23.50</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>April</td>\n      <td>1948</td>\n      <td>3.9</td>\n      <td>272.567000</td>\n      <td>23.82</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>May</td>\n      <td>1948</td>\n      <td>3.5</td>\n      <td>274.776667</td>\n      <td>24.01</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>June</td>\n      <td>1948</td>\n      <td>3.6</td>\n      <td>276.986333</td>\n      <td>24.15</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>July</td>\n      <td>1948</td>\n      <td>3.6</td>\n      <td>279.196000</td>\n      <td>24.40</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>August</td>\n      <td>1948</td>\n      <td>3.9</td>\n      <td>279.586000</td>\n      <td>24.43</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>September</td>\n      <td>1948</td>\n      <td>3.8</td>\n      <td>279.976000</td>\n      <td>24.36</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>October</td>\n      <td>1948</td>\n      <td>3.7</td>\n      <td>280.366000</td>\n      <td>24.31</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>November</td>\n      <td>1948</td>\n      <td>3.8</td>\n      <td>278.588667</td>\n      <td>24.16</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>December</td>\n      <td>1948</td>\n      <td>4.0</td>\n      <td>276.811333</td>\n      <td>24.05</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>January</td>\n      <td>1949</td>\n      <td>4.3</td>\n      <td>275.034000</td>\n      <td>24.01</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>February</td>\n      <td>1949</td>\n      <td>4.7</td>\n      <td>273.806333</td>\n      <td>23.91</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>March</td>\n      <td>1949</td>\n      <td>5.0</td>\n      <td>272.578667</td>\n      <td>23.91</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>30</th>\n      <td>April</td>\n      <td>1949</td>\n      <td>5.3</td>\n      <td>271.351000</td>\n      <td>23.92</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>32</th>\n      <td>May</td>\n      <td>1949</td>\n      <td>6.1</td>\n      <td>271.863667</td>\n      <td>23.91</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>34</th>\n      <td>June</td>\n      <td>1949</td>\n      <td>6.2</td>\n      <td>272.376333</td>\n      <td>23.92</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>36</th>\n      <td>July</td>\n      <td>1949</td>\n      <td>6.7</td>\n      <td>272.889000</td>\n      <td>23.70</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n    <tr>\n      <th>38</th>\n      <td>August</td>\n      <td>1949</td>\n      <td>6.8</td>\n      <td>272.135000</td>\n      <td>23.70</td>\n      <td>Harry S Truman</td>\n      <td>Democratic</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nOur last function does some simple eda for us to show us how the ecomonic features impact the voting percentages and creates a correlation plot that allows us to easily the factors with the most impact. Those plots are here below.\n\n::: {#f04994c6 .cell execution_count=5}\n``` {.python .cell-code}\nsimple_eda(df, election_years_only=False)\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```\n{'regression_data':            CPI  UNRATE           GDP  Republican Percentage  \\\n 0       23.680     3.4    265.742000                  19.00   \n 1       23.680     3.4    265.742000                  43.80   \n 2       23.680     3.4    265.742000                  21.00   \n 3       23.680     3.4    265.742000                  47.10   \n 4       23.680     3.4    265.742000                  46.50   \n ...        ...     ...           ...                    ...   \n 47699  317.603     4.1  29969.802667                  46.05   \n 47700  317.603     4.1  29969.802667                  39.01   \n 47701  317.603     4.1  29969.802667                  69.98   \n 47702  317.603     4.1  29969.802667                  49.70   \n 47703  317.603     4.1  29969.802667                  71.60   \n \n        Democratic Percentage  \n 0                       0.00  \n 1                      53.80  \n 2                      61.70  \n 3                      47.60  \n 4                      51.90  \n ...                      ...  \n 47699                  51.83  \n 47700                  57.23  \n 47701                  28.11  \n 47702                  48.84  \n 47703                  25.84  \n \n [12276 rows x 5 columns],\n 'correlation_matrix':                        Total Votes  Republican Votes  Republican Percentage  \\\n Total Votes               1.000000          0.969986              -0.081917   \n Republican Votes          0.969986          1.000000               0.053214   \n Republican Percentage    -0.081917          0.053214               1.000000   \n Republican Electoral      0.437137          0.585495               0.355254   \n Democratic Votes          0.980228          0.911472              -0.162722   \n Democratic Percentage     0.147370          0.047304              -0.740895   \n Democratic Electoral      0.582448          0.421036              -0.408526   \n UNRATE                    0.080245          0.076761               0.007525   \n GDP                       0.236310          0.228975              -0.008160   \n CPI                       0.244334          0.232681              -0.024641   \n Year                      0.245630          0.234175              -0.014445   \n Election Cycle            0.245630          0.234175              -0.014445   \n \n                        Republican Electoral  Democratic Votes  \\\n Total Votes                        0.437137          0.980228   \n Republican Votes                   0.585495          0.911472   \n Republican Percentage              0.355254         -0.162722   \n Republican Electoral               1.000000          0.298537   \n Democratic Votes                   0.298537          1.000000   \n Democratic Percentage             -0.291936          0.246491   \n Democratic Electoral              -0.382130          0.681338   \n UNRATE                            -0.021282          0.075143   \n GDP                               -0.092791          0.244251   \n CPI                               -0.095640          0.249520   \n Year                              -0.086234          0.246665   \n Election Cycle                    -0.086234          0.246665   \n \n                        Democratic Percentage  Democratic Electoral    UNRATE  \\\n Total Votes                         0.147370              0.582448  0.080245   \n Republican Votes                    0.047304              0.421036  0.076761   \n Republican Percentage              -0.740895             -0.408526  0.007525   \n Republican Electoral               -0.291936             -0.382130 -0.021282   \n Democratic Votes                    0.246491              0.681338  0.075143   \n Democratic Percentage               1.000000              0.430514  0.002662   \n Democratic Electoral                0.430514              1.000000  0.020430   \n UNRATE                              0.002662              0.020430  1.000000   \n GDP                                 0.078712              0.060607  0.125352   \n CPI                                 0.069073              0.067373  0.214730   \n Year                                0.046464              0.058699  0.317797   \n Election Cycle                      0.046464              0.058699  0.317797   \n \n                             GDP       CPI      Year  Election Cycle  \n Total Votes            0.236310  0.244334  0.245630        0.245630  \n Republican Votes       0.228975  0.232681  0.234175        0.234175  \n Republican Percentage -0.008160 -0.024641 -0.014445       -0.014445  \n Republican Electoral  -0.092791 -0.095640 -0.086234       -0.086234  \n Democratic Votes       0.244251  0.249520  0.246665        0.246665  \n Democratic Percentage  0.078712  0.069073  0.046464        0.046464  \n Democratic Electoral   0.060607  0.067373  0.058699        0.058699  \n UNRATE                 0.125352  0.214730  0.317797        0.317797  \n GDP                    1.000000  0.975727  0.923433        0.923433  \n CPI                    0.975727  1.000000  0.974139        0.974139  \n Year                   0.923433  0.974139  1.000000        1.000000  \n Election Cycle         0.923433  0.974139  1.000000        1.000000  ,\n 'vote_cols': ['Republican Percentage', 'Democratic Percentage'],\n 'econ_cols': ['CPI', 'UNRATE', 'GDP']}\n```\n:::\n:::\n\n\n",
    "supporting": [
      "Package_Demo_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}